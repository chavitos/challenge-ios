//
//  CategoryProductsWorker.swift
//  LodjinhaSZ
//
//  Created by Tiago Chaves on 05/06/19.
//  Copyright (c) 2019 Tiago Chaves. All rights reserved.
//
//  This file was generated by the Clean Swift Xcode Templates so
//  you can apply clean architecture to your iOS and Mac projects,
//  see http://clean-swift.com
//

import UIKit

class CategoryProductsWorker {
	
	var categoryProductsWorker:CategoryProductsWorkerProtocol
	
	init(_ categoryProductsWorker:CategoryProductsWorkerProtocol) {
		
		self.categoryProductsWorker = categoryProductsWorker
	}
	
	func getProducts(ofCategory categoryId:Int, withOffset offset:Int, andLimit limit:Int, completion:@escaping(ProductList?,Error?) -> Void) {
	
		categoryProductsWorker.getProducts(ofCategory: categoryId, withOffset: offset, andLimit: limit) { (categoryProducts: () throws -> ProductList) in
		
			do{
				let categoryProducts = try categoryProducts()
				completion(categoryProducts,nil)
			}catch let error{
				completion(nil, WorkerErrors.networkProblem(error: error))
			}
		}
	}
}

protocol CategoryProductsWorkerProtocol {
	func getProducts(ofCategory categoryId:Int, withOffset offset:Int, andLimit limit:Int, completion:@escaping(() throws -> ProductList) -> Void)
}
